import unittest
from typing import List

import pyparcel
import struct
from pyparcel import LongLong

DATA: List[int] = [
    -9223372036854775808,
    -8926293110018286195,
    -8836741725187504929,
    -8119225485181304667,
    -7899559549661366079,
    -7194951986495271596,
    -7188613722230046734,
    -7106176059368426895,
    -7028129093506146123,
    -6898417289140326470,
    -6649927515733883060,
    -6636191807589479377,
    -6618234538315129087,
    -6316446690410744721,
    -6261825536156982241,
    -5814725412725791816,
    -5740598975839892020,
    -5446338074413545047,
    -5439878453615791124,
    -5065021963322332776,
    -4495252085244087449,
    -3866974376211169480,
    -3850518155439752693,
    -3774806488133099517,
    -3716741382807003499,
    -3389225046109293641,
    -3361727471976544294,
    -3344725789042272329,
    -3316769627269946629,
    -3174519792107116946,
    -2542193368944811008,
    -2517185345012394146,
    -2460409288362649771,
    -2421048831413691686,
    -1865652881359269397,
    -1824550174532274243,
    -1744395777320137921,
    -1614136393837771891,
    -1586783691360491906,
    -1101322301100232577,
    -1067048771582697298,
    -981685257279333515,
    -909394283877565883,
    -766658590346658198,
    -491566423868675948,
    -294303468410947083,
    -288645343067639377,
    -1,
    0,
    1,
    112830633699536390,
    241286954939477618,
    642345415026359233,
    927940487161617262,
    1072311725478233626,
    1296875862372409154,
    1445833817856590952,
    1848098130343042249,
    1957385582007365896,
    2111111748906209830,
    2233689846731416394,
    2241053793458114542,
    2472986046128253853,
    2934439099564407685,
    3225911413544056414,
    3231453573308432323,
    3303427102632280486,
    3834239016698826945,
    3970817576629176249,
    3991223831817508584,
    4563804994549973581,
    4580989246178066461,
    4889745969283700121,
    5025450452684291406,
    5283329176992993931,
    5314547595075311076,
    5355335086745190111,
    5435966834350741304,
    5471822954376521058,
    5518490238210576927,
    5603550831482638458,
    5620918172207142035,
    5636982890878129130,
    5644391149042577838,
    5798792344954609221,
    5868008256441067854,
    5933512429028326881,
    6009798824149411171,
    6045587349203478964,
    6312994151159056741,
    6442718020268322219,
    6595774799058576528,
    6626644542969687146,
    6990389107462975299,
    8291248248070550729,
    8426612085672558472,
    8885880132627706910,
    8904382297692600185,
    9219583491384471903,
    9223372036854775807,
]


class TestStrictLongLong(unittest.TestCase):
    def test_pack(self):
        for i in DATA:
            self.assertEqual(pyparcel.pack(LongLong(i)), struct.pack("=q", i))

    def test_pack_unpack(self):
        for i in DATA:
            self.assertEqual(
                LongLong(i), pyparcel.unpack(pyparcel.pack(LongLong(i)), LongLong()),
            )


if __name__ == "__main__":
    unittest.main()
