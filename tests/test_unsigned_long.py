import unittest
from typing import List

import pyparcel
import struct
from pyparcel import UnsignedLong

DATA: List[int] = [
    0,
    1,
    37625301,
    123405319,
    181056001,
    209330193,
    363033156,
    379612392,
    380757000,
    381039265,
    400690000,
    566997988,
    589989275,
    599309397,
    628459347,
    649521070,
    658390705,
    777203419,
    916207334,
    963218923,
    987800867,
    1005813525,
    1048107738,
    1076067579,
    1214883134,
    1252577654,
    1262992694,
    1266086982,
    1313912277,
    1332243613,
    1361707445,
    1367594061,
    1375445387,
    1384427552,
    1468025405,
    1500823835,
    1512540838,
    1549433812,
    1592656878,
    1598592519,
    1598754081,
    1607288813,
    1662677337,
    1668257264,
    1693174178,
    1704301539,
    1711971563,
    1749780081,
    1837086063,
    2112632334,
    2135818549,
    2185485283,
    2208309691,
    2210805448,
    2226009565,
    2234229315,
    2270840454,
    2334339411,
    2351535538,
    2377183674,
    2390981020,
    2410257313,
    2424464225,
    2540556570,
    2541752612,
    2556352518,
    2577845366,
    2665150136,
    2716894121,
    2739845855,
    2782282146,
    2800897355,
    2837732093,
    2879124135,
    2898762844,
    3000242686,
    3099792063,
    3106947880,
    3143743590,
    3290004762,
    3371795189,
    3424853090,
    3513473347,
    3594648113,
    3632180020,
    3647324573,
    3704242703,
    3748862554,
    3788228186,
    3884884574,
    3911234888,
    3940061207,
    3976954401,
    4056359704,
    4094583905,
    4095707150,
    4212949558,
    4219325407,
    4274540576,
    4294967295,
]


class TestStrictUnsignedLong(unittest.TestCase):
    def test_pack(self):
        for i in DATA:
            self.assertEqual(pyparcel.pack(UnsignedLong(i)), struct.pack("=L", i))

    def test_pack_unpack(self):
        for i in DATA:
            self.assertEqual(
                UnsignedLong(i),
                pyparcel.unpack(pyparcel.pack(UnsignedLong(i)), UnsignedLong()),
            )


if __name__ == "__main__":
    unittest.main()
